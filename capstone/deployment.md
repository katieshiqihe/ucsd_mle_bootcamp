# Deployment Architecture

The model is a deep convolutional GAN that trains on grayscale images and attempts to colorize them. The input images are screenshots from videos download from YouTube, and the training dataset consists of about 15,000 images whereas test set consists of over 3000 images (which is then used to construct the video frame by frame). They are stored as unsigned integer arrays in a single HDF5 file. HDF5 supports indexing and slicing which allows a subset of images to be loaded and operated on during training. A utility function is included to capture and process image data from YouTube, which can be used to build the database or appended to an existing HDF5 table. Due to the size of the file (about 4 GB with compression), it's not checked in on Github but anyone should be able to build it from scratch as long as the videos are available on YouTube.

The actual training step is a custom TensorFlow function and the main train function loops over mini batches in each epoch. An update function can be written to utilize the same training step and the structure of the main train function but only loops over new data by slicing the HDF5 table. Model weights are stored automatically with each 10 epochs of training, so we just need to deploy new weights to update the model in production. We can inspect the results on new training data by using the `predict_train` function in the evaluate script (providing the right index) and regenerate the colorized test video by calling the `predict_test` function in the same script.

The overall deployment process is rather simple because all training is offline and there's no GUI on top of evaluation. All scripts and weights, as well as a subset of data can be packaged together in a Docker container to be deployed elsewhere. A Dockerfile is included to install appropriate dependencies. However, training does take a long time due to the size of dataset and the complexity of the model. An Nvidia P5000 GPU is utilized in the training process and each epoch took a bit over 5 minutes. This is at least 10 time speed up from a comparable CPU-only setup.
